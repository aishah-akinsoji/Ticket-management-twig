<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/style.css">
        <script src="https://kit.fontawesome.com/ad69c05094.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <title>{% block title %}Ticket Management system built with twig {% endblock %}</title>
    </head>
    <body>
        {% include 'toast.twig' %}
        <div class="auth-page position-relative">
            <div class="container">
                <div class="d-flex justify-content-center gap-3 flex-column align-items-center">
                <button id="back" class="back border-0 mt-4" onclick="window.location.href='index.php?page=landing'">
                    <i class="fa-solid fa-arrow-left"></i> Back to home
                </button>
                <div class="login-card card border-0 align-items-center justify-content-center rounded-4 px-5 pb-4">
                    <div class="logo">
                    <img src="/fixMate-logo-transparent.png" alt="FixMate Logo"/>
                    </div>
                    <h1 class="text-center">{% if mode == 'login' %}Welcome Back{% else %}Create Account{% endif %}</h1>
                    <p class="text-center mb-5">{% if mode == 'login' %}Login to access your dashboard{% else %}Sign up to get started{% endif %}</p>
                    <form method="POST" action="" class="d-flex flex-column gap-3 w-100">
                    {% if mode == 'signup' %}
                        <div class="name d-flex flex-column">
                            <label for="username">Full Name</label>
                            <input name="uname" id="username" type="text"  value="{{ old.uname|default('') }}" required/>
                            <span class="text-danger">{% if errors.uname %}{{ errors.uname }}{% endif %}</span>
                        </div>
                    {% endif %}
                    <div class="email d-flex flex-column">
                        <label for="email">Email</label>
                        <input id="email" name="email" type="email" value="{{ old.email|default('') }}" required/>
                        <span class="text-danger">{% if errors.email %}{{errors.email}}{% endif %} </span>
                    </div>
                    <div class="password d-flex flex-column">
                        <label for="password">Password</label>
                        <input id="password" name="password" type="password" required/>
                        <span class="text-danger"> {% if errors.password %}{{errors.password}}{% endif %} </span>
                        {% if mode == 'signup' %}
                            <span class="password-rule">max: 8 characters;<br/>at least one symbol;<br/>at least one letter;<br/> at least one digit</span>
                        {% endif %}
                    </div>
                    {% if mode == 'signup' %}
                        <div class="cpassword d-flex flex-column">
                        <label for="cpassword">Confirm Password</label>
                        <input id="cpassword" name="cpassword" type="password" required/>
                        <span class="text-danger">{% if errors.cpassword %}{{ errors.cpassword }}{% endif %}</span>
                        </div>
                    {% endif %}
                    {% if mode == 'login' %}
                        <button class="coloured-btn" name="login" type="submit">Login</button> {% else %}
                        <button class="coloured-btn" name='signup' type="submit">Sign Up</button>
                    {% endif %}
                    </form>
                    {% if mode == 'login' %}
                    <p class="mt-3">
                        Don't have an account? <a href="index.php?page=auth&mode=signup" class="toggle-link">Sign Up</a>
                    </p> {% else %} 
                    <p class="mt-3">
                        Already have an account? <a href="index.php?page=auth&mode=login" class="toggle-link">Login</a>
                    </p>
                    {% endif %}
                </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="public/script.js"></script>
    </body>
</html>